# Needlelight v6.1.0.2 Release Notes!

## Overview

v6.1.0.2 focuses on Silksong reliability, especially on macOS. It aligns every network endpoint and installer touchpoint with the new Silksong catalog, hardens fallback behaviour, and fixes the launcher so the Silksong app bundle starts correctly on macOS systems.

## Major Items

- Silksong content routing
  - `ModDatabase` now selects Silksong-specific ModLinks, API manifests, and vanilla Assembly JSON feeds with tiered fallbacks so API installs no longer hit 404 errors.
  - JSON parsing accepts per-game payloads and OS-specific keys, allowing the client to resolve the correct Assembly-CSharp package on macOS, Linux, and Windows.
- macOS launch stability
  - `InfoViewModel` resolves the managed folder back to the `.app/Contents/MacOS` directory, matching the actual Silksong bundle layout and eliminating "executable not found" failures when launching on macOS.
- API toggle resilience
  - API fetches degrade gracefully with stub manifests when upstream sources are unavailable, keeping the Toggle API button responsive for both Hollow Knight and Silksong profiles.

---

## Fixes & Improvements

- Needlelight/Services/ModDatabase.cs
  - Added per-profile endpoint definitions, sequential fetch fallbacks, and resilient JSON traversal for assembly link discovery.
  - Shared helper routines now emit warnings instead of crashing when endpoints time out and supply empty manifests as a safe fallback.
- Needlelight/ViewModels/InfoViewModel.cs
  - Updated macOS path handling to anchor launches from the `.app` bundle's `Contents/MacOS` folder while preserving existing Steam detection logic.
  - Nullability adjustments keep compiler warnings at bay and highlight the resolved executable path explicitly.

(If you prefer a single-line git-friendly changelist, I can provide `git diff --name-only` or a compact changelog.)

---

## Developer Notes

- Version: `6.1.0.2`
- Build & Tests: `dotnet build` succeeds on .NET 9.0 without warnings; unit tests pass via the solution build.
- Cross-platform notes: Silksong logic now respects per-OS manifests; Windows and Linux behaviour remains backward compatible.

---

## Upgrade Notes

- Profiles: Switch to the Silksong profile and re-run the API toggle; Needlelight now downloads from the Silksong feeds automatically.
- macOS users: No manual bundle edits required; the launcher now targets the correct `Contents/MacOS` executable. Re-launch Needlelight after updating to confirm.
- Offline scenarios: Cached modlinks may be stale. Clear `%AppData%/HKModInstaller/Modlinks.xml` (or the equivalent platform cache) to pick up the refreshed Silksong endpoints.
