<Window xmlns="https://github.com/avaloniaui"
                xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                xmlns:vm="using:Needlelight.ViewModels"
                Width="1200" Height="800"
                MinWidth="900"
                MinHeight="650"
                x:Class="Needlelight.Views.Windows.MainWindow"
                Icon="/Assets/Needlelight.ico"
                Title="Needlelight"
                WindowState="Maximized"
                x:DataType="vm:MainWindowViewModel"
                Background="{DynamicResource Brush.Background}">

    <!-- Main Layout: Flat Top Bar | Content | Smaller Bottom Nav -->
    <Grid RowDefinitions="Auto,*,Auto">

        <!-- Top Bar - Flat and Square -->
        <Border Grid.Row="0"
                Background="{DynamicResource Brush.Surface}"
                BorderBrush="{DynamicResource Brush.Border}"
                BorderThickness="0,0,0,1"
                Padding="24,16">
            <Grid ColumnDefinitions="Auto,*,Auto">
                <!-- Left: Branding and Version -->
                <StackPanel Grid.Column="0" Orientation="Horizontal" Spacing="12" VerticalAlignment="Center">
                    <TextBlock Text="Needlelight"
                               FontFamily="{DynamicResource GameFont}"
                               FontSize="24"
                               FontWeight="Bold"
                               Foreground="{DynamicResource Brush.TextPrimary}"/>
                    <TextBlock Text="{CompiledBinding AppVersion}"
                               VerticalAlignment="Center"
                               FontFamily="{DynamicResource UIFont}"
                               FontSize="14"
                               Foreground="{DynamicResource Brush.TextSecondary}"/>
                </StackPanel>
                <!-- Right: Game selector on top bar -->
                <StackPanel Grid.Column="2" Orientation="Horizontal" Spacing="8" VerticalAlignment="Center">
                    <TextBlock Text="Game:" VerticalAlignment="Center"
                               FontFamily="{DynamicResource UIFont}"
                               Foreground="{DynamicResource Brush.TextSecondary}"/>
                    <ComboBox MinWidth="220"
                              ItemsSource="{CompiledBinding TopBarAvailableGames}"
                              SelectedItem="{CompiledBinding TopBarSelectedGame, Mode=TwoWay}"
                              FontFamily="{DynamicResource UIFont}"/>
                </StackPanel>
            </Grid>
        </Border>

        <!-- Content Area with Transitions -->
        <TransitioningContentControl Grid.Row="1"
                                     Content="{Binding Content}"
                                     Background="{DynamicResource Brush.Background}"/>

        <!-- Bottom Navigation - Icon + Text, centered -->
        <ListBox Grid.Row="2"
                 Classes="bottom-nav"
                 SelectedIndex="{Binding BottomNavIndex, Mode=TwoWay}">
            <ListBoxItem>
                <StackPanel Orientation="Horizontal" Spacing="8" HorizontalAlignment="Center" VerticalAlignment="Center">
                    <PathIcon Data="{StaticResource apps_regular}" Width="18" Height="18"/>
                    <TextBlock Text="Game Launcher"
                               FontFamily="{DynamicResource UIFont}"
                               FontSize="13"
                               FontWeight="SemiBold"
                               VerticalAlignment="Center"/>
                </StackPanel>
            </ListBoxItem>
            <ListBoxItem>
                <StackPanel Orientation="Horizontal" Spacing="8" HorizontalAlignment="Center" VerticalAlignment="Center">
                    <PathIcon Data="{StaticResource book_database_regular}" Width="18" Height="18"/>
                    <TextBlock Text="Mods"
                               FontFamily="{DynamicResource UIFont}"
                               FontSize="13"
                               FontWeight="SemiBold"
                               VerticalAlignment="Center"/>
                </StackPanel>
            </ListBoxItem>
            <ListBoxItem>
                <StackPanel Orientation="Horizontal" Spacing="8" HorizontalAlignment="Center" VerticalAlignment="Center">
                    <PathIcon Data="{StaticResource settings_regular}" Width="18" Height="18"/>
                    <TextBlock Text="Settings"
                               FontFamily="{DynamicResource UIFont}"
                               FontSize="13"
                               FontWeight="SemiBold"
                               VerticalAlignment="Center"/>
                </StackPanel>
            </ListBoxItem>
        </ListBox>
    </Grid>
</Window>

